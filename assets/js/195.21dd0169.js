(window.webpackJsonp=window.webpackJsonp||[]).push([[195],{683:function(t,a,s){"use strict";s.r(a);var n=s(27),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"查找文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#查找文件"}},[t._v("#")]),t._v(" 查找文件")]),t._v(" "),s("p",[t._v("如果您曾经使用过 "),s("code",[t._v("shell")]),t._v(" 脚本，则很可能使用模式匹配来定位文件。其实你可能已经广泛使用了。\n如果您没有使用它，模式匹配使用特殊字符来创建一个模式，然后文件名可以与该模式进行比较。\n例如，在大多数 "),s("code",[t._v("shell")]),t._v(" 脚本中，星号 * 匹配任意数量的字符。例如，以下命令列出当前目录中的所有文件 "),s("code",[t._v(".html")]),t._v("：")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("% "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ls")]),t._v(" *.html\n\n百分号是什么标记？我在 linux 终端中是这样的：\n\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ls")]),t._v(" *.html\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br")])]),s("p",[t._v("该 "),s("code",[t._v("java.nio.file")]),t._v(" 软件包为此功能提供程序化支持。每个文件系统实现提供了一个 "),s("code",[t._v("PathMatcher")]),t._v("。\n您可以通过使用 "),s("code",[t._v("PathMatcher")]),t._v(" 类中的 "),s("code",[t._v("getPathMatcher(String)")]),t._v(" 方法来检索文件系统 "),s("code",[t._v("FileSystem")]),t._v("。")]),t._v(" "),s("p",[t._v("以下代码片段将获取默认文件系统的路径匹配器：")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" pattern "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("PathMatcher")]),t._v(" matcher "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FileSystems")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getDefault")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getPathMatcher")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"glob:"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" pattern"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])]),s("p",[t._v("传递的 "),s("code",[t._v("string参数")]),t._v(" 指定要 "),s("code",[t._v("getPathMatcher")]),t._v(" 匹配的语法 "),s("code",[t._v("flavor")]),t._v(" 和 "),s("code",[t._v("pattern")]),t._v("。\n此示例指定 "),s("code",[t._v("glob")]),t._v(" 语法。如果您不熟悉 "),s("code",[t._v("glob")]),t._v(" 语法，请参阅 "),s("RouterLink",{attrs:{to:"/essential/io/fileOps.html"}},[t._v("什么是 Glob-该文章中的章节")]),t._v("。")],1),t._v(" "),s("p",[t._v("Glob 语法易于使用和灵活，但如果您愿意，还可以使用正则表达式或正则表达式语法。有关正则表达式的更多信息，请参见 "),s("a",{attrs:{href:"http://docs.oracle.com/javase/tutorial/essential/regex/index.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("正则表达式的教程"),s("OutboundLink")],1),t._v("。一些文件系统实现可能支持其他语法。")]),t._v(" "),s("p",[t._v("如果要使用其他形式的基于字符串的模式匹配，您可以创建自己的 "),s("code",[t._v("PathMatcher")]),t._v(" 类。本页中的示例使用 glob 语法。")]),t._v(" "),s("p",[t._v("一旦你创建了你的 "),s("code",[t._v("PathMatcher")]),t._v(" 实例，你就可以根据它来匹配文件了。该 "),s("code",[t._v("PathMatcher")]),t._v(" 接口有一个方法，\n"),s("code",[t._v("matches")]),t._v(" 它接受一个 "),s("code",[t._v("Path")]),t._v(" 参数并返回一个布尔值：它与模式匹配，或者它不匹配。")]),t._v(" "),s("p",[t._v("以下代码片段查找以这些 "),s("code",[t._v(".java")]),t._v(" 或 "),s("code",[t._v(".class")]),t._v(" 结尾的文件打印到标准输出流：")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[t._v("  "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Path")]),t._v(" targetPath "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Paths")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"d:/server.xml"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("PathMatcher")]),t._v(" matcher "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FileSystems")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getDefault")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getPathMatcher")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"glob:*.{xml}"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 特别注意这里。要返回FileName的path")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 区别是：fileName的Path对象中的path就只有文件名，而targetPath中的path 是整个路径")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("matcher"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("matches")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("targetPath"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getFileName")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("targetPath"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br")])]),s("h2",{attrs:{id:"递归模式匹配"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#递归模式匹配"}},[t._v("#")]),t._v(" 递归模式匹配")]),t._v(" "),s("p",[t._v("寻找匹配特定模式，遍历一个文件树，匹配成功出现了多少次。你知道一个文件在某处在文件系统中，但在哪里？\n也许你需要在文件树查找所有文件具有特定文件扩展名。\n"),s("RouterLink",{attrs:{to:"/essential/io/walk.html"}},[t._v("该列子在上一章节中：创建 FileVisitor 时的注意事项 中的第三点")])],1)])}),[],!1,null,null,null);a.default=e.exports}}]);