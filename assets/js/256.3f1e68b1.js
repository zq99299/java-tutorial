(window.webpackJsonp=window.webpackJsonp||[]).push([[256],{774:function(a,e,t){"use strict";t.r(e);var v=t(27),s=Object(v.a)({},(function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"locale-敏感类服务-spi"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#locale-敏感类服务-spi"}},[a._v("#")]),a._v(" Locale 敏感类服务 SPI")]),a._v(" "),t("p",[a._v("此功能启用了与 "),t("strong",[a._v("语言环境相关的数据和服务的插件")]),a._v("。这样，第三方便能够在 "),t("code",[a._v("java.text")]),a._v(" 和 "),t("code",[a._v("java.util")]),a._v(" 包中提供大多数对 "),t("strong",[a._v("语言环境敏感的类")]),a._v(" 的实现。")]),a._v(" "),t("p",[a._v("SPI（服务提供商接口）的实现基于由服务提供商实现的抽象类和 Java 接口。在运行时，Java 类加载机制用于动态定位和加载实现 SPI 的类。")]),a._v(" "),t("p",[a._v("您可以使用 Locale 敏感的服务 SPI 提供以下 Locale 敏感实现：")]),a._v(" "),t("ul",[t("li",[t("p",[t("code",[a._v("BreakIterator")]),a._v("  对象")])]),a._v(" "),t("li",[t("p",[t("code",[a._v("Collator")]),a._v(" 对象")])]),a._v(" "),t("li",[t("p",[t("code",[a._v("Locale")]),a._v(" 类：")]),a._v(" "),t("p",[a._v("Language code, Country code, and Variant name 。")]),a._v(" "),t("p",[a._v("语言代码，国家代码 和变体名称")])]),a._v(" "),t("li",[t("p",[a._v("Time Zone 时区名称")])]),a._v(" "),t("li",[t("p",[a._v("Currency symbols 货币符号")])]),a._v(" "),t("li",[t("p",[t("code",[a._v("DateFormat")]),a._v(" 对象")])]),a._v(" "),t("li",[t("p",[t("code",[a._v("DateFormatSymbol")]),a._v(" 对象")])]),a._v(" "),t("li",[t("p",[t("code",[a._v("NumberFormat")]),a._v(" 对象")])]),a._v(" "),t("li",[t("p",[t("code",[a._v("DecimalFormatSymbols")]),a._v(" 对象")])])]),a._v(" "),t("p",[a._v("相应的 SPI 包含在 "),t("code",[a._v("java.text.spi")]),a._v(" 和 "),t("code",[a._v("java.util.spi")]),a._v(" 包中：")]),a._v(" "),t("p",[a._v("java.util.spi：")]),a._v(" "),t("ul",[t("li",[t("code",[a._v("CurrencyNameProvider")])]),a._v(" "),t("li",[t("code",[a._v("LocaleServiceProvider")])]),a._v(" "),t("li",[t("code",[a._v("TimeZoneNameProvider")])]),a._v(" "),t("li",[t("code",[a._v("CalendarDataProvider")])])]),a._v(" "),t("p",[a._v("java.text.spi：")]),a._v(" "),t("ul",[t("li",[t("code",[a._v("BreakIteratorProvider")])]),a._v(" "),t("li",[t("code",[a._v("CollatorProvider")])]),a._v(" "),t("li",[t("code",[a._v("DateFormatProvider")])]),a._v(" "),t("li",[t("code",[a._v("DateFormatSymbolsProvider")])]),a._v(" "),t("li",[t("code",[a._v("DecimalFormatSymbolsProvider")])]),a._v(" "),t("li",[t("code",[a._v("NumberFormatProvider")])])]),a._v(" "),t("p",[a._v("例如，如果要为新 Locale 提供 NumberFormat 对象，必须实现 java.text.spi.NumberFormatProvider 类。您需要扩展此类并实现其方法：")]),a._v(" "),t("ul",[t("li",[t("code",[a._v("getCurrencyInstance(Locale locale)")])]),a._v(" "),t("li",[t("code",[a._v("getIntegerInstance(Locale locale)")])]),a._v(" "),t("li",[t("code",[a._v("getNumberInstance(Locale locale)")])]),a._v(" "),t("li",[t("code",[a._v("getPercentInstance(Locale locale)")])])]),a._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Locale")]),a._v(" loc "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("new")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Locale")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"da"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"DK"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("NumberFormat")]),a._v(" nf "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("NumberFormatProvider")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("getNumberInstance")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("loc"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br")])]),t("p",[a._v("这些方法首先检查 Java 运行时环境是否支持请求的 Locale；如果是这样， 他们使用这种支持。否则，这些方法将相应接口的已安装提供程序的 "),t("code",[a._v("getAvaableLocales()")]),a._v(" 方法调用，以查找支持请求区域设置的提供程序。")]),a._v(" "),t("p",[a._v("本来还想实现下这个类，看了下里面的实现还挺复杂的。官方没有提供如何实现，暂时不研究了，有兴趣可以看已经实现的源码类")])])}),[],!1,null,null,null);e.default=s.exports}}]);